<!DOCTYPE html><html lang="zh-cn,en,default"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 使用Lottie简单实现动画 · winter</title><meta name="description" content="使用Lottie简单实现动画 - 廖文韬"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/css/prontera.css"><link rel="search" type="application/opensearchdescription+xml" href="https://winterliao.github.io/atom.xml" title="winter"></head><body><header class="feature-header"><nav class="component-nav"><ul><div class="logo-container"><a href="/"><h2 class="title">winter</h2></a></div><a href="/" target="_self" class="li component-nav-item"><p>主页</p></a><a href="/archives" target="_self" class="li component-nav-item"><p>归档</p></a><ul class="shortcut-icons"><a href="https://github.com/winterLiao" target="_blank"><img src="/images/github.svg" class="icon"></a></ul></ul></nav></header><main class="container"><div id="post-container"><div class="post"><article class="post-block"><h1 class="post-title">使用Lottie简单实现动画</h1><div class="post-info">2016年12月24日</div><div class="post-content"><p>Lottie是Airbnb最近推出的开源项目,设计师只要使用AE把动画做出来,再使用Bodymovin插件就能把动画文件导出成json文件。这个json文件中包括动画的点的坐标,运行的轨迹等数据,在项目中引用这个开源库,使用这个json文件（或者URL）就可以实现动画,极快的完成了一个动画效果,要知道,简单的一个动画,用代码实现起来都需要花一定的时间。<br><img src="https://raw.githubusercontent.com/airbnb/lottie-ios/master/_Gifs/Examples2.gif" alt="图片">   </p>
<h3 id="跨平台使用"><a href="#跨平台使用" class="headerlink" title="跨平台使用"></a>跨平台使用</h3><p>这个库是跨平台的,只要设计出一套json动画描述文件,就可以支持Android,iOS,ReactNative,iOS目前是支持iOS8及以上的,同时支持OC和Swift,下面讲iOS的用法。</p>
<h3 id="支持使用Cocoapods和Carthage导入"><a href="#支持使用Cocoapods和Carthage导入" class="headerlink" title="支持使用Cocoapods和Carthage导入"></a>支持使用Cocoapods和Carthage导入</h3><figure class="highlight nginx"><table><tr><td class="code"><pre><div class="line"><span class="attribute">pod</span> <span class="string">'lottie-ios'</span></div><div class="line">pod install</div></pre></td></tr></table></figure>
<figure class="highlight nginx"><table><tr><td class="code"><pre><div class="line"><span class="attribute">github</span> <span class="string">"airbnb/lottie-ios"</span> <span class="string">"master"</span></div><div class="line">carthage update</div></pre></td></tr></table></figure>
<h3 id="简单代码实现"><a href="#简单代码实现" class="headerlink" title="简单代码实现"></a>简单代码实现</h3><p>加载json本地文件   </p>
<figure class="highlight objc"><table><tr><td class="code"><pre><div class="line"><span class="comment">//加载本地的json描述文件</span></div><div class="line">LAAnimationView *animation = [LAAnimationView animationNamed:<span class="string">@"Lottie"</span>];</div><div class="line">[<span class="keyword">self</span>.view addSubview:animation];</div><div class="line"><span class="comment">//循环播放</span></div><div class="line">animation.loopAnimation = <span class="literal">YES</span>;</div><div class="line"><span class="comment">//1.直接开启</span></div><div class="line">[animation playWithCompletion:^(<span class="built_in">BOOL</span> animationFinished) &#123;</div><div class="line">  <span class="comment">// Do Something</span></div><div class="line">&#125;];</div><div class="line"></div><div class="line"><span class="comment">//2.手动开启</span></div><div class="line"><span class="comment">//设置动画的进度</span></div><div class="line"><span class="comment">//animation.animationProgress = 0</span></div><div class="line"><span class="comment">//[animation play]</span></div><div class="line"><span class="comment">//手动关闭</span></div><div class="line"><span class="comment">//[animation pause]</span></div></pre></td></tr></table></figure>
<p>加载URL</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><div class="line">LAAnimationView *animation = [[LAAnimationView alloc] initWithContentsOfURL:[<span class="built_in">NSURL</span> URLWithString:URL]];</div><div class="line">[<span class="keyword">self</span>.view addSubview:animation];</div></pre></td></tr></table></figure>
<h3 id="增加转场动画"><a href="#增加转场动画" class="headerlink" title="增加转场动画"></a>增加转场动画</h3><figure class="highlight objc"><table><tr><td class="code"><pre><div class="line"><span class="meta">#pragma mark -- View Controller Transitioning</span></div><div class="line"></div><div class="line">\\</div><div class="line">- (<span class="keyword">id</span>&lt;<span class="built_in">UIViewControllerAnimatedTransitioning</span>&gt;)animationControllerForPresentedController:(<span class="built_in">UIViewController</span> *)presented</div><div class="line">                                                                  presentingController:(<span class="built_in">UIViewController</span> *)presenting</div><div class="line">                                                                      sourceController:(<span class="built_in">UIViewController</span> *)source &#123;</div><div class="line">  LAAnimationTransitionController *animationController = [[LAAnimationTransitionController alloc] initWithAnimationNamed:<span class="string">@"vcTransition1"</span></div><div class="line">                                                                                                          fromLayerNamed:<span class="string">@"outLayer"</span></div><div class="line">                                                                                                            toLayerNamed:<span class="string">@"inLayer"</span>];</div><div class="line">  <span class="keyword">return</span> animationController;</div><div class="line">&#125;</div><div class="line"></div><div class="line">\\</div><div class="line">- (<span class="keyword">id</span>&lt;<span class="built_in">UIViewControllerAnimatedTransitioning</span>&gt;)animationControllerForDismissedController:(<span class="built_in">UIViewController</span> *)dismissed &#123;</div><div class="line">  LAAnimationTransitionController *animationController = [[LAAnimationTransitionController alloc] initWithAnimationNamed:<span class="string">@"vcTransition2"</span></div><div class="line">                                                                                                          fromLayerNamed:<span class="string">@"outLayer"</span></div><div class="line">                                                                                                            toLayerNamed:<span class="string">@"inLayer"</span>];</div><div class="line">  <span class="keyword">return</span> animationController;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Swift实现"><a href="#Swift实现" class="headerlink" title="Swift实现"></a>Swift实现</h3><figure class="highlight swift"><table><tr><td class="code"><pre><div class="line"><span class="keyword">let</span> animationView = <span class="type">LAAnimationView</span>.animationNamed(<span class="string">"hamburger"</span>)</div><div class="line"><span class="keyword">self</span>.view.addSubview(animationView!)</div><div class="line"></div><div class="line">animationView?.play(completion: &#123; (finished) <span class="keyword">in</span></div><div class="line">  <span class="comment">// Do Something</span></div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h3 id="相关文章"><a href="#相关文章" class="headerlink" title="相关文章"></a>相关文章</h3><p><a href="https://gold.xitu.io/post/58948f1b0ce4630056f3a629?utm_source=gold_browser_extension">这个项目碉堡了</a>   </p>
<p><a href="https://github.com/airbnb/lottie-ios">Airbnb/Lottie-iOS</a></p>
</div></article></div><div id="disqus_thread"></div></div><script>var disqus_shortname = 'Winter';
var disqus_identifier = '2016/12/24/hello-world/';
var disqus_title = '使用Lottie简单实现动画';
var disqus_url = 'https://winterliao.github.io/2016/12/24/hello-world/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//Winter.disqus.com/count.js" async></script></main><footer class="footer-container"><div class="paginator"><a href="/2017/02/21/textView/" class="prev">上一篇</a></div><div class="copyright"><p>© 2017 - 2018 <a href="https://winterliao.github.io">廖文韬</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/AngryPowman/hexo-theme-prontera" target="_blank">hexo-theme-prontera</a>.</p></div></footer><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"Winter",'auto');ga('send','pageview');</script></body></html>